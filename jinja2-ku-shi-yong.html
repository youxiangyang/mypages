
<!DOCTYPE html>
<html lang="chinese (simplified)">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="" />

  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet/less" type="text/css" href="/theme/stylesheet/style.less">
    <script src="//cdnjs.cloudflare.com/ajax/libs/less.js/2.5.1/less.min.js" type="text/javascript"></script>

    <link id="dark-theme-style" rel="stylesheet" type="text/css"
          media="(prefers-color-scheme: dark)"
    href="/theme/stylesheet/dark-theme.min.css">

    <link id="pygments-dark-theme" rel="stylesheet" type="text/css"
              media="(prefers-color-scheme: dark)"
          href="/theme/pygments/monokai.min.css">
    <link id="pygments-light-theme" rel="stylesheet" type="text/css"
              media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)"
          href="/theme/pygments/monokai.min.css">



  <link rel="stylesheet" type="text/css" href="/theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="/theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="/theme/font-awesome/css/solid.css">



  <!-- Chrome, Firefox OS and Opera -->
  <meta name="theme-color" content="#333333">
  <!-- Windows Phone -->
  <meta name="msapplication-navbutton-color" content="#333333">
  <!-- iOS Safari -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <!-- Microsoft EDGE -->
  <meta name="msapplication-TileColor" content="#333333">

  <link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="沐子 Atom">



 

<meta name="author" content="xiangyang" />
<meta name="description" content="Jinja2 是一个现代的、设计友好的模板语言，用于 Python，它允许你在 HTML、XML 或其他文本格式中嵌入 Python 代码" />
<meta name="keywords" content="python">


  <meta property="og:site_name" content="沐子"/>
  <meta property="og:title" content="Jinja2 库使用"/>
  <meta property="og:description" content="Jinja2 是一个现代的、设计友好的模板语言，用于 Python，它允许你在 HTML、XML 或其他文本格式中嵌入 Python 代码"/>
  <meta property="og:locale" content="zh_CN"/>
  <meta property="og:url" content="/jinja2-ku-shi-yong.html"/>
  <meta property="og:type" content="article"/>
  <meta property="article:published_time" content="2024-10-31 00:00:00+08:00"/>
  <meta property="article:modified_time" content="2024-10-31 00:00:00+08:00"/>
  <meta property="article:author" content="/author/xiangyang.html">
  <meta property="article:section" content="开发"/>
  <meta property="article:tag" content="python"/>
  <meta property="og:image" content="">

  <title>沐子 &ndash; Jinja2 库使用</title>


</head>
<body >

<aside>
  <div>
    <a href="/">
      <img src="/theme/img/profile.png" alt="" title="">
    </a>

    <h1>
      <a href="/"></a>
    </h1>



    <nav>
      <ul class="list">


            <li>
              <a target="_self"
                 href="/pages/about.html">
                About
              </a>
            </li>
            <li>
              <a target="_self"
                 href="/pages/contact.html">
                Contact
              </a>
            </li>

      </ul>
    </nav>

    <ul class="social">
      <li>
        <a class="sc-白日与明月"
           href="#"
           target="_blank">
          <i class="fa-brands fa-白日与明月"></i>
        </a>
      </li>
    </ul>
  </div>

</aside>
  <main>

<nav>
  <a href="/">Home</a>

  <a href="/archives.html">Archives</a>
  <a href="/categories.html">Categories</a>
  <a href="/tags.html">Tags</a>

  <a href="/feeds/all.atom.xml">Atom</a>

</nav>

<article class="single">
  <header>
      
    <h1 id="jinja2-ku-shi-yong">Jinja2 库使用</h1>
    <p>
      Posted on 周四 31 十月 2024 in <a href="/category/kai-fa.html">开发</a>

    </p>
  </header>


  <div>
    <p>@[toc]</p>
<p>在Jinja2中，可以使用字符串作为模板源而非文件路径。这可以通过创建一个<code>Template</code>对象并直接传入模板字符串来实现。下面是一个简单的例子说明如何做到这一点：</p>
<p>首先，确保已经安装了Jinja2库。如果还没有安装，可以通过pip安装：</p>
<div class="highlight"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>jinja2
</code></pre></div>

<p>然后，可以按照下面的方式使用字符串模板：</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">jinja2</span> <span class="kn">import</span> <span class="n">Template</span>

<span class="c1"># 定义你的模板字符串</span>
<span class="n">template_string</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">Hello {{ name }},</span>
<span class="s2">This is an example of using a Jinja2 template from a string.</span>
<span class="s2">Today&#39;s date is {{ today_date }}.</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="c1"># 创建一个Template对象，传入模板字符串</span>
<span class="n">template</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="n">template_string</span><span class="p">)</span>

<span class="c1"># 定义渲染模板所需的数据字典</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;John Doe&#39;</span><span class="p">,</span>
    <span class="s1">&#39;today_date&#39;</span><span class="p">:</span> <span class="s1">&#39;2023-04-01&#39;</span>
<span class="p">}</span>

<span class="c1"># 渲染模板</span>
<span class="n">output</span> <span class="o">=</span> <span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
</code></pre></div>

<p>在这个例子中，<code>template_string</code>变量包含了模板的定义，其中<code>{{ name }}</code>和<code>{{ today_date }}</code>是待替换的变量。我们通过<code>Template(template_string)</code>创建了一个模板对象，然后使用<code>render(data)</code>方法传入数据字典来渲染模板，最终得到渲染后的字符串输出。</p>
<h2>使用本地文件作为模板进行渲染</h2>
<p>下面是一个简单的例子</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">jinja2</span> <span class="kn">import</span> <span class="n">Environment</span><span class="p">,</span> <span class="n">FileSystemLoader</span>

<span class="c1"># 设置模板文件所在的目录</span>
<span class="n">template_dir</span> <span class="o">=</span> <span class="s1">&#39;templates&#39;</span>
<span class="c1"># 创建Jinja2环境对象</span>
<span class="n">env</span> <span class="o">=</span> <span class="n">Environment</span><span class="p">(</span><span class="n">loader</span><span class="o">=</span><span class="n">FileSystemLoader</span><span class="p">(</span><span class="n">template_dir</span><span class="p">))</span>
<span class="c1"># 选择模板文件</span>
<span class="n">template</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">get_template</span><span class="p">(</span><span class="s1">&#39;my_template.jinja&#39;</span><span class="p">)</span>
<span class="c1"># 准备数据</span>
<span class="n">context</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s1">&#39;Jinja2 Template&#39;</span><span class="p">,</span> <span class="s1">&#39;content&#39;</span><span class="p">:</span> <span class="s1">&#39;Hello, Jinja2!}</span>
<span class="c1"># 渲染模板</span>
<span class="n">rendered_template</span> <span class="o">=</span> <span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
<span class="c1"># 输出渲染后的内容</span>
<span class="nb">print</span><span class="p">(</span><span class="n">rendered_template</span><span class="p">)</span>
<span class="c1"># 保存到文件</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;output.html&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">rendered_template</span><span class="p">)</span>
</code></pre></div>

<p>模板文件:</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>{{ title }}<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>{{ title }}<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>{{ content }}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div>

<h2>模板语法</h2>
<p>Jinja2 是一个现代的、设计友好的模板语言，用于 Python，它允许你在 HTML、XML 或其他文本格式中嵌入 Python 代码。以下是一些 Jinja2 的主要模板语法要点：</p>
<ol>
<li><strong>变量</strong>：</li>
<li>使用 <code>{{ variable }}</code> 语法来输出变量的值。</li>
<li>变量可以是一个字符串、数字、列表、字典或任何 Python 对象。</li>
<li><strong>注释</strong>：</li>
<li>使用 <code>{# ... #}</code> 来包含注释，这些注释不会在渲染的输出中出现。</li>
<li><strong>控制结构</strong>：</li>
<li><code>for</code> 循环：使用 <code>{% for item in sequence %}...{% endfor %}</code> 来循环遍历序列。</li>
<li><code>if</code> 语句：使用 <code>{% if condition %}...{% elif condition %}...{% else %}...{% endif %}</code> 来进行条件判断。</li>
<li><code>macro</code>：使用 <code>{% macro name(parameters) %}...{% endmacro %}</code> 来定义宏，可以在模板中重用代码块。</li>
<li><code>call</code>：使用 <code>{% call macro() %}...{% endcall %}</code> 来调用宏。</li>
<li><strong>过滤器</strong>：</li>
<li>使用 <code>{{ variable | filter }}</code> 语法来对变量应用过滤器，以转换输出。</li>
<li>例如，<code>{{ name | upper }}</code> 将变量 <code>name</code> 的值转换为大写。</li>
<li><strong>继承</strong>：</li>
<li>使用 <code>{% extends "base.html" %}</code> 来继承另一个模板。</li>
<li>使用 <code>{% block name %}...{% endblock %}</code> 来定义在子模板中可以覆盖的块。</li>
<li><strong>包含</strong>：</li>
<li>使用 <code>{% include "fragment.html" %}</code> 来包含另一个模板文件的内容。</li>
<li><strong>静态文件</strong>：</li>
<li>使用 <code>{% static "file.path" %}</code> 来引用静态文件，如 CSS 或 JavaScript 文件。</li>
<li><strong>循环中的特殊变量</strong>：</li>
<li><code>loop.index</code>：当前迭代的索引（从 1 开始）。</li>
<li><code>loop.index0</code>：当前迭代的索引（从 0 开始）。</li>
<li><code>loop.revindex</code>：到循环结束的迭代次数（从 1 开始）。</li>
<li><code>loop.revindex0</code>：到循环结束的迭代次数（从 0 开始）。</li>
<li><code>loop.first</code>：如果是第一次迭代，则为 True。</li>
<li><code>loop.last</code>：如果是最后一次迭代，则为 True。</li>
<li><strong>空白控制</strong>：</li>
<li>使用 <code>-</code> 符号紧跟 <code>{%</code> 或 <code>%}</code> 来消除标签周围的空白。</li>
<li>例如，<code>{% for item in seq -%}</code> 和 <code>{%- endfor %}</code> 将不会在输出中产生额外的空白行。</li>
<li><strong>转义</strong>：<ul>
<li>使用 <code>{% raw %}...{% endraw %}</code> 来禁用内嵌代码的转义。</li>
</ul>
</li>
<li><strong>测试</strong>：<ul>
<li>使用 <code>{{ variable is test }}</code> 语法来进行测试，例如 <code>{{ name is defined }}</code> 检查变量是否已定义。</li>
</ul>
</li>
<li><strong>全局变量</strong>：<ul>
<li>Jinja2 提供了一些全局变量，如 <code>request</code>、<code>session</code> 等，取决于应用程序是如何配置的。</li>
</ul>
</li>
<li><strong>自定义过滤器、测试和全局函数</strong>：<ul>
<li>可以在 Jinja2 环境中注册自定义的过滤器、测试和全局函数，以便在模板中使用。
这些是 Jinja2 模板语言的一些基本语法和功能。Jinja2 的强大之处在于它的灵活性和易于扩展性，允许开发者根据自己的需求定制模板的功能。</li>
</ul>
</li>
</ol>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="/tag/python.html">python</a>
    </p>
  </div>






</article>

<footer>
<p>&copy; 2024 </p>
<p>
Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
  <span class="footer-separator">|</span>
  Switch to the <a href="javascript:void(0)" onclick="theme.switch(`dark`)">dark</a> | <a href="javascript:void(0)" onclick="theme.switch(`light`)">light</a> | <a href="javascript:void(0)" onclick="theme.switch(`browser`)">browser</a> theme
  <script id="dark-theme-script"
          src="/theme/dark-theme/dark-theme.min.js"
          data-enable-auto-detect-theme="True"
          data-default-theme="light"
          type="text/javascript">
  </script>
</p></footer>  </main>

<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " 沐子 ",
  "url" : "",
  "image": "",
  "description": ""
}
</script>
</body>
</html>